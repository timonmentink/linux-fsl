
/* From sabresd dtsi
 *	#include "imx6qdl-sabresd.dtsi"
 */
/ {
	aliases {
		mxcfb0 = &mxcfb1;
		mxcfb1 = &mxcfb2;
		serial0 = &uart2;
		serial1 = &uart5;
		serial2 = &uart1;
		serial3 = &uart4;
		i2c0 = &i2c1;
		i2c1 = &i2c2;
		i2c2 = &i2c3;
	};

	memory {
		reg = <0x10000000 0x40000000>;
	};

	leds {
		compatible = "gpio-leds";
	};

	gpioexport:gpio-export{
		compatible = "gpio-of-export";

	};

	pnglogo{
		compatible = "guf,png-logo";
		guf,logo-license = <0>;
		rotation = <0>;
	};

	clk_12mhz_ref:clk_12mhz_ref {
		compatible = "fixed-factor-clock";

		clocks = <&clks 201>;
		clock-names = "cko";
		clock-div = <1>;
		clock-mult = <1>;

		#clock-cells = <0>;
		clock-output-names = "ck12mhzref";

	};

	regulators:regulators {
		compatible = "simple-bus";

		supply_12P: 12P_supply {
			compatible = "regulator-fixed";
			regulator-name = "12P";
			regulator-min-microvolt = <12000000>;
			regulator-max-microvolt = <12000000>;
			regulator-always-on;
		};
		supply_5P0: 5P0_supply {
			compatible = "regulator-fixed";
			regulator-name = "5P0";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			regulator-always-on;
			vin-supply = <&supply_12P>;
		};
		supply_SYS_4V2: SYS_4V2_supply {
			compatible = "regulator-fixed";
			regulator-name = "SYS_4V2";
			regulator-min-microvolt = <4200000>;
			regulator-max-microvolt = <4200000>;
			regulator-always-on;
			vin-supply = <&supply_12P>;
		};

		supply_5P0_can_rs485: can_rs485_supply {
			compatible = "regulator-fixed";
			regulator-name = "5P0_CAN_RS485";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			gpio = <&gpio5 9 0>;
			startup-delay-us = <300>;	/* Measured on Santaro X1 S/N 01340152 */
			enable-active-high;

			vin-supply = <&supply_5P0>;
			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_5P0_can_1>;
		};

		reg_usb_otg_vbus: usb_otg_vbus {
			compatible = "regulator-fixed";
			regulator-name = "usb_otg_vbus";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			gpio = <&gpio4 15 0>;
			enable-active-low;

			vin-supply = <&supply_5P0>;

			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_usb_otg_vbus_1>;
		};

		reg_usb_h1_vbus: usb_h1_vbus {
			compatible = "regulator-fixed";
			regulator-name = "usb_h1_vbus";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			/*gpio = <&gpio1 0 0>; */
			/*enable-active-low; */

			regulator-always-on;
			vin-supply = <&supply_5P0>;

		};

		reg_usb_h2_vbus: usb_h2_vbus {
			compatible = "regulator-fixed";
			regulator-name = "usb_h2_vbus";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			vin-supply = <&supply_5P0> ;
			regulator-always-on;
		};

		supply_VSNVS_3V0: VSNVS_3V0_supply {
			compatible = "regulator-fixed";
			regulator-name = "VSNVS_3V0";
			regulator-min-microvolt = <3000000>;
			regulator-max-microvolt = <3000000>;
			regulator-always-on;
			vin-supply = <&supply_SYS_4V2>;
		};

	};

	sound {
		compatible = "fsl,imx6-santaro-sgtl5000", "fsl,imx-audio-sgtl5000";
		model = "sgtl5000-audio";
		ssi-controller = <&ssi2>;
		audio-codec = <&codec>;
		audio-routing =
			"MIC_IN", "Mic Jack",
			"Mic Jack", "Mic Bias",
			"Headphone Jack", "HP_OUT";
		mux-int-port = <2>;
		mux-ext-port = <4>;
		gpio-speaker = <&gpio5 29 0>;

		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_sound_1 >; 	
	};

	sound-hdmi {
		compatible = "fsl,imx6q-audio-hdmi",
			     "fsl,imx-audio-hdmi";
		model = "imx-audio-hdmi";
		hdmi-controller = <&hdmi_audio>;
		status = "disabled";
	};

	mxcfb1: fb@0 {
		compatible = "fsl,mxc_sdc_fb";
		disp_dev = "ldb";
		interface_pix_fmt = "RGB666";
		mode_str = "LDB-GUF-Ampire-AM800480R3TMQW";
		default_bpp = <16>;
		int_clk = <0>;
		late_init = <0>;

		rotate = <180>;
		 
		status = "disabled";
	};


	mxcfb2: fb@1 {
			compatible = "fsl,mxc_sdc_fb";
			disp_dev = "hdmi";
			interface_pix_fmt = "RGB24";
			mode_str ="1920x1080M@60";
			default_bpp = <24>;
			int_clk = <0>;
			late_init = <0>;
			status = "disabled";
	};


	backlight: backlight {
			   compatible = "pwm-backlight";
			   pwms = <&pwm1 0 50000>;
			   brightness-levels = <0 40 80 160 320 640 1280 2550>;
			   default-brightness-level = <7>;
			   default-blank = <1>;

			   pinctrl-names = "default";
			   pinctrl-0 = <&pinctrl_backlight>;
			   bl-pwr-gpio = <&gpio5 22 0>;
			   bl-pwr-act-low = <0>;
			   sysfs-name = "pwm-backlight.0";
	  };

	matrix-keypad {
		compatible = "gpio-matrix-keypad";
		status = "disabled";
		
		gpio-activelow;
		pinctrl-names = "default";
		pinctrl-0 = <
			&pinctrl_gpio_export_keypad_gpio_changeable
			&pinctrl_gpio_export_keypad_gpio_i2c
			&pinctrl_gpio_export_keypad_spi_gpio 
			>;

		debounce-delay-ms = <5>;
		col-scan-delay-us = <2>;

		col-gpios = 
					<&gpio4 20 0>,	/* KP_PIN_4, Col 0 */
					<&gpio4 18 0>,	/* KP_PIN_6, Col 1 */
					<&gpio4 16 0>,	/* KP_PIN_8, Col 2 */
					<&gpio1 19 0>,	/* KP_PIN_10,Col 3 */
					<&gpio4 13 0>,	/* KP_PIN_12,Col 4 */
					<&gpio4 10 0>,	/* KP_PIN_14,Col 5 */
					<&gpio4 7 0>,	/* KP_PIN_16,Col 6 */
					<&gpio4 9 0>;	/* KP_PIN_18,Col 7 */

		row-gpios = 
					<&gpio4 11 0>,	/* KP_PIN_3, Row 0 */
					<&gpio4 17 0>,	/* KP_PIN_5, Row 1 */
					<&gpio4 19 0>,	/* KP_PIN_7, Row 2 */
					<&gpio4 21 0>,	/* KP_PIN_9, Row 3 */
					<&gpio4 12 0>,	/* KP_PIN_11,Row 4 */
					<&gpio4 5 0>,	/* KP_PIN_13,Row 5 */
					<&gpio4 8 0>,	/* KP_PIN_15,Row 6 */
					<&gpio4 6 0>;	/* KP_PIN_17,Row 7 */

		linux,keymap = <
				0x00000002
				0x00010003
				0x00020004

				0x01000005
				0x01010006
				0x01020007

				0x02000008
				0x02010009
				0x0202000A

				0x03000037
				0x0301000B
				0x0302001C

				>;
	};

	hw_revision_fixup: hw_revision_fixup{
		/* Availble revisions with major and minor, first revision 
		   is the default where the devicetree works without any changes */
		revisions = <1 1
					 1 2
					 >;
	};

};

&anatop_vdd1p1{
		vin-supply = <&supply_VSNVS_3V0>;
};
&anatop_vdd3p0{
		vin-supply = <&reg_usb_h2_vbus>;
};
&anatop_vdd2p5{
		vin-supply = <&supply_VSNVS_3V0>;
};

/* This is not working, as the cpu_freq module ends up with 
   regulator-dummy as parent instead of reg arm */
&reg_arm{
/*	vin-supply = <&pmic_sw1a_vddcore>;*/
};
&reg_soc{
/*	vin-supply = <&pmic_sw1c_vddsoc>;*/
};
&reg_pu{
/*	vin-supply = <&pmic_sw1c_vddsoc>;*/
};

&gpio1{
	gpio-default-label = "gpio-%d";
	gpio-label-17 = "dig_out1";
	gpio-label-19 = "keypad_pin10";
};
&gpio4{
	gpio-default-label = "gpio-%d";
	gpio-label-11 = "keypad_pin3";
	gpio-label-20 = "keypad_pin4";
	gpio-label-17 = "keypad_pin5";
	gpio-label-18 = "keypad_pin6";
	gpio-label-19 = "keypad_pin7";
	gpio-label-16 = "keypad_pin8";
	gpio-label-21 = "keypad_pin9";
	gpio-label-13 = "keypad_pin11";
	gpio-label-12 = "keypad_pin12";
	gpio-label-5 = "keypad_pin13";
	gpio-label-10 = "keypad_pin14";
	gpio-label-8 = "keypad_pin15";
	gpio-label-7 = "keypad_pin16";
	gpio-label-6 = "keypad_pin17";
	gpio-label-9 = "keypad_pin18";
	gpio-label-31 = "clear_all";
};
&gpio5{
	gpio-default-label = "gpio-%d";
	gpio-label-23 = "dig_in2";
	gpio-label-25 = "dig_out2";
	gpio-label-24 = "dig_in1";
	gpio-label-28 = "mdb_wakeup_out";
	gpio-label-18 = "led";
};
&gpio7{
	gpio-default-label = "gpio-%d";
	gpio-label-7 = "keypad_vcc";
};

&gpioexport{
		/* Third gpio option are the flags, with custom meaning. */
		/*   bit 1   act-low	*/
		/*   bit 2   init high	*/

		gpio-grp-keypad_changeable{
			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_gpio_export_keypad_gpio_changeable>;

			direction-changeable;
			direction-input;
			
			/* Sysfs kp gpios with changeable direction */
			gpios =	
					<&gpio4 20 0>,	/*  KP_PIN_4 */
					<&gpio4 17 0>,	/*  KP_PIN_5 */
					<&gpio4 18 0>,	/*  KP_PIN_6 */
					<&gpio4 19 0>,	/*  KP_PIN_7 */
					<&gpio4 16 0>,	/*  KP_PIN_8 */
					<&gpio4 21 0>,	/*  KP_PIN_9 */
					<&gpio1 19 0>;	/*  KP_PIN_10 */

			status = "disabled"; /* enabled depending on the keypad= kernel option*/
		};
		gpio-grp-keypad_fixed_in_santaro{
			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_gpio_export_gpio_fixed_in_santaro>;

			direction-not-changeable;
			direction-input;
			
			/* Sysfs kp gpios with changeable direction */
			gpios =	
					<&gpio5 24 1>,	/* DIG_IN1 */
					<&gpio5 23 1>,	/* DIG_IN2 */
					<&gpio4 31 1>;	/* CLEAR_ALL */

			status = "okay";
		};
		gpio-grp-keypad_fixed_out_santaro{
			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_gpio_export_gpio_fixed_out_santaro>;

			direction-not-changeable;
			direction-output;
			
			/* Sysfs kp gpios with changeable direction */
			gpios =	
					<&gpio1 17 3>,	/*  DIG_OUT_1 */
					<&gpio5 25 3>,	/*  DIG_OUT_2 */
					<&gpio7 7 3>,	/*  KP5V */
                    <&gpio5 18 2>;  /*  LED1 */

			status = "okay";
		};
		gpio-grp-keypad_i2c{
			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_gpio_export_keypad_gpio_i2c>;

			direction-changeable;
			direction-input;

			gpios =	<&gpio4 12 0>,	/*  KP_PIN_11 */
					<&gpio4 13 0>;	/*  KP_PIN_12 */

			status = "disabled"; /* enabled depending on the keypad= kernel option*/
		};
		gpio-grp-keypad_spi{
			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_gpio_export_keypad_spi_gpio>;

			direction-changeable;
			direction-input;

			gpios =	
					<&gpio4 11 0>,	/* KP_PIN_3 */
					<&gpio4 5 0>,	/* KP_PIN_13 */
					<&gpio4 10 0>,	/* KP_PIN_14 */
					<&gpio4 8 0>,	/* KP_PIN_15 */
					<&gpio4 7 0>,	/* KP_PIN_16 */
					<&gpio4 6 0>,	/* KP_PIN_17 */
					<&gpio4 9 0>;	/* KP_PIN_18 */

			status = "disabled"; /* enabled depending on the keypad= kernel option*/
		};
};


&sdma{
	iram = <&ocram>;
};
&audmux {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_audmux_4>;
	status = "okay";
};

&cpu0 {
	arm-supply = <&pmic_sw1a_vddcore>;
	soc-supply = <&pmic_sw1c_vddsoc>;
	pu-supply = <&pu_dummy>; /* use pu_dummy if VDDSOC share with VDDPU */
};

&ecspi1 {
	fsl,spi-num-chipselects = <3>;
	cs-gpios = <&gpio4  9 0
				&gpio4 10 0
				&gpio4 11 0
		>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ecspi1_2 &pinctrl_ecspi1_chipselect>;
	status = "disabled";

	spidev0@0x00 {
		reg = <0>;
		compatible = "spidev";
		spi-max-frequency = <25000000>;
		status = "disabled";
	};
	spidev1@0x01 {
		reg = <1>;
		compatible = "spidev";
		spi-max-frequency = <25000000>;
		status = "disabled";
	};
	spidev2@0x02 {
		reg = <2>;
		compatible = "spidev";
		spi-max-frequency = <25000000>;
		status = "disabled";
	};
};

&fec {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_enet_4>;
	phy-mode = "rmii";
	status = "okay";
	local-mac-address = [00 07 8E 14 72 F8]; 
	phy-supply = <&supply_sw4_3V3>;
};

&gpc {
	fsl,cpu_pupscr_sw2iso = <0xf>;
	fsl,cpu_pupscr_sw = <0xf>;
	fsl,cpu_pdnscr_iso2sw = <0x1>;
	fsl,cpu_pdnscr_iso = <0x1>;
	fsl,ldo-bypass = <1>; /* use ldo-bypass, */
	fsl,wdog-reset = <1>; /* watchdog select of reset source */
	fsl,wdog-reset-srs = <0>; /* watchdog triggers the software reset */
	fsl,wdog-reset-wdog-b = <1>; /* watchdog triggers the external wdog reset */
	pu-supply = <&pu_dummy>; /* ldo-bypass:use pu_dummy if VDDSOC share with VDDPU */
};

&gpu {
	pu-supply = <&pu_dummy>; /* ldo-bypass:use pu_dummy if VDDSOC share with VDDPU */
};

&hdmi_audio {
	status = "disabled";
};

&hdmi_cec {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_hdmi_cec_2>;
	status = "disabled";
};

&hdmi_core {
	ipu_id = <0>;
	disp_id = <1>;
	status = "disabled";
	/*\FIXME  Make this dependend to keypad= "*/
};

&hdmi_video {
	fsl,phy_reg_vlev = <0x0294>;
	fsl,phy_reg_cksymtx = <0x800d>;
	/* fsl,hdcp; */
	status = "disabled";
	
/*	pinctrl-names = "default"; */
/*	pinctrl-0 = <&pinctrl_hdmi_hdcp_1>; */

};

&pu_dummy {
		regulator-always-on;
};
&sdma{
		fsl,sdma-ram-script-name = "imx/sdma/sdma-imx6q-to1.bin";
};

&i2c1 {
	clock-frequency = <400000>;
	pinctrl-names = "default", "gpio";
	pinctrl-0 = <&pinctrl_i2c1_2>;
    pinctrl-1 = <&pinctrl_i2c1_2_gpio>;
	status = "okay";

	gpio-scl = <&gpio5 26 0>;
	gpio-sda = <&gpio5 27 0>;

	rtc: rtcpcf8563@51 {
		compatible = "nxp,pcf8563";
		reg = <0x51>;

		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_rtc>;

		/*irq-gpio = <&gpio4 29 0>; *//* Not implemented ? */ 
	};

	codec: sgtl5000@0a {
		   compatible = "fsl,sgtl5000";
		   reg = <0x0a>;

		   clocks = <&clks 201>;
		   clock-names = "cko";

  	       VDDA-supply = <&supply_sw4_3V3>;
  	       VDDIO-supply = <&supply_sw4_3V3>;
	   };

	eeprom: eeprom@50 {
			compatible = "guf,gfeeprom";
			reg = <0x50>;
			pagesize = <32>;
			bytelen = <4096>;
			bus-id = <0>;
			flags = <0x80>;		/* AT24_FLAG_ADDR16 */
	   };

	lm73: lm73@49 {
			compatible = "national,lm73";
			reg = <0x49>;

			interrupts = <28 0x4>; 
			interrupt-parent = <&gpio4>;

			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_lm73_1>;

	   };

	pmic: pfuze100@08 {
		compatible = "fsl,pfuze100";
		reg = <0x08>;

		regulators {
			pmic_sw1a_vddcore: sw1ab {
				regulator-name = "VDD_CORE (sw1a)";
				regulator-min-microvolt = <300000>;
				regulator-max-microvolt = <1875000>;
				regulator-boot-on;
				regulator-always-on;
				regulator-ramp-delay = <6250>;

				default-voltage = <1300000>;
				
				vin-supply = <&supply_SYS_4V2>;
			};

			pmic_sw1c_vddsoc: sw1c {
				regulator-name = "VDD_SOC (sw1c)";
				regulator-min-microvolt = <300000>;
				regulator-max-microvolt = <1875000>;
				regulator-boot-on;
				regulator-always-on;
				regulator-ramp-delay = <6250>;

				default-voltage = <1300000>;

				vin-supply = <&supply_SYS_4V2>;
			};

			supply_sw4_3V3: sw2 {
				regulator-name = "SW4_3V3 (sw2)";
				regulator-min-microvolt = <3300000>;
				regulator-max-microvolt = <3300000>;
				regulator-boot-on;
				regulator-always-on;

				default-voltage = <3300000>;
				vin-supply = <&supply_SYS_4V2>;
			};

			sw3a_reg: sw3a {
				regulator-name = "DDR_1V5 (sw3a)";
				regulator-min-microvolt = <400000>;
				regulator-max-microvolt = <1975000>;
				regulator-boot-on;
				regulator-always-on;

				default-voltage = <1500000>;
				vin-supply = <&supply_SYS_4V2>;
			};

			supply_DDR_1V5: sw3b {
				regulator-name = "DDR_1V5 (sw3b)";
				regulator-min-microvolt = <400000>;
				regulator-max-microvolt = <1975000>;
				regulator-boot-on;
				regulator-always-on;

				default-voltage = <1500000>;
				vin-supply = <&supply_SYS_4V2>;
			};

			supply_AUX_3V15: sw4 {
				regulator-name = "AUX 3V15 (sw4)";
				regulator-min-microvolt = <800000>;
				regulator-max-microvolt = <3300000>;

				default-voltage = <3150000>;

				vin-supply = <&supply_SYS_4V2>;
			};

			swbst_reg: swbst {
				status = "disabled";
				regulator-min-microvolt = <5000000>;
				regulator-max-microvolt = <5150000>;
				regulator-boot-on;
				regulator-always-on;

				default-voltage = <5000000>;
			};

			snvs_reg: vsnvs {
				regulator-min-microvolt = <1200000>;
				regulator-max-microvolt = <3000000>;
				regulator-boot-on;
				regulator-always-on;

				default-voltage = <3000000>;
				vin-supply = <&supply_SYS_4V2>;
			};

			vref_reg: vrefddr {
				regulator-boot-on;
				regulator-always-on;

				default-voltage = <750000>;
				vin-supply = <&supply_DDR_1V5>;
			};

			vgen1_reg: vgen1 {
				regulator-min-microvolt = <800000>;
				regulator-max-microvolt = <1550000>;
				regulator-always-on;

				default-voltage = <1500000>;
				vin-supply = <&supply_AUX_3V15>;
			};

			vgen2_reg: vgen2 {
				regulator-min-microvolt = <800000>;
				regulator-max-microvolt = <1550000>;
				regulator-always-on;

				default-voltage = <1200000>;
				vin-supply = <&supply_AUX_3V15>;
			};

			vgen3_reg: vgen3 {
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <3300000>;
				regulator-always-on;

				default-voltage = <2500000>;
				vin-supply = <&supply_sw4_3V3>;
			};

			vgen4_reg: vgen4 {
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <3300000>;
				regulator-always-on;
				regulator-boot-on;

				default-voltage = <1800000>;
				vin-supply = <&supply_sw4_3V3>;
			};

			vgen5_reg: vgen5 {
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <3300000>;
				regulator-always-on;
				regulator-boot-on;

				default-voltage = <2800000>;
				vin-supply = <&supply_SYS_4V2>;
			};

			vgen6_reg: vgen6 {
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <3300000>;
				regulator-always-on;

				default-voltage = <2800000>;
				vin-supply = <&supply_SYS_4V2>;
			};
		};
	};

};

&i2c2 {
	clock-frequency = <100000>;
	pinctrl-names = "default", "gpio";
	pinctrl-0 = <&pinctrl_i2c2_2>;
	pinctrl-1 = <&pinctrl_i2c2_2_gpio>;
	status = "disabled";	/* will be enabled depending on the key pad kernel ootion */

	gpio-scl = <&gpio4 12 0>;
	gpio-sda = <&gpio4 13 0>;

	hdmi: edid@50 {
		compatible = "fsl,imx6-hdmi-i2c";
		reg = <0x50>;
		/* V1.0 boards have this on i2c1! */
	};


};

&i2c3 {
	clock-frequency = <400000>;
	pinctrl-names = "default", "gpio";
	pinctrl-0 = <&pinctrl_i2c3_5>;
	pinctrl-1 = <&pinctrl_i2c3_5_gpio>;
	status = "okay";

	gpio-scl = <&gpio1 5 0>;
	gpio-sda = <&gpio1 6 0>;
	
	eetii2c: eetii2c@04 {
		compatible = "eeti,eetii2c_ts";
		reg = <0x04>;

		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_ctouch>;

		reset-gpio = <&gpio1 20 0>;
		irq-gpio = <&gpio4 27 0>;
		wake-gpio = <&gpio1 18 0>;
		irq-flags = <0x00000004>;  /* IRQF_TRIGGER_HIGH */

		status = "disabled";  /* will be enabled from the guf xml setting */
	};

	egalaxi2c: egalaxi2c@2a {
		compatible = "eeti,exc3000_ts";
		reg = <0x2a>;

		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_ctouch>;

		reset-gpio = <&gpio1 20 0>;
		irq-gpio = <&gpio4 27 0>;
		wake-gpio = <&gpio1 18 0>;
		irq-flags = <0x00000004>;  /* IRQF_TRIGGER_HIGH */

		status = "disabled";  /* will be enabled from the guf xml setting */
	};


	pixcir: pixcir@5c {
		compatible = "auo,auo_pixcir_ts";
		reg = <0x5c>;

		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_ctouch>;

		interrupts = <27 0x2>; /* In the gpio4 interupt controller pin 27 irq is used, 0x2 = high-to-low-edge*/
		interrupt-parent = <&gpio4>;

		gpios = 
				<&gpio4 27 0>,  /* irq */
				<&gpio1 20 0>;  /* reset */
		x-size = <1024>;
		y-size = <600>;

		int-setting = <0>; /* AUO_PIXCIR_INT_PERIODICAL */

		status = "disabled";  /* will be enabled from the guf xml setting */
	};

	edt_ft5x06: edt_ft5x06@38 {
		compatible = "edt,ft5x06";
		reg = <0x38>;

		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_ctouch>;

		interrupts = <27 0x2>; /* In the gpio4 interupt controller pin 27 irq is used, 0x2 = high-to-low-edge*/
		interrupt-parent = <&gpio4>;

		reset-gpio = <&gpio1 20 0>;
		irq-gpio = <&gpio4 27 0>;
		wake-gpio = <&gpio1 18 0>;

		status = "disabled";  /* will be enabled from the guf xml setting */
	};

	stmpe610: stmpe610@44 {
		compatible = "st,stmpe610";
		reg = <0x44>;
		interrupts = <6 0x8>; /* In the gpio5 interupt controller pin 6 irq is used, 0x8 = active low level-sensitive*/
		interrupt-parent = <&gpio5>;
		interrupt-controller;

		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_rtouch>;

		status = "disabled"; /* will be enabled from the guf xml setting */
	
		stmpe_touchscreen {
			compatible = "st,stmpe-ts";
			st,sample-time = <4>;
			st,mod-12b = <1>;
			st,ref-sel = <0>;
			st,adc-freq = <1>;
			st,ave-ctrl = <3>;
			st,touch-det-delay = <3>;
			st,settling = <3>;
			st,fraction-z = <7>;
			st,i-drive = <0>;
		};
	};
	
	usb3503@08 {
		compatible = "smsc,usb3503";
		reg = <0x08>;
		connect-gpios = <&gpio1 16 0>;
		intn-gpios = <&gpio7 12 1>;
		reset-gpios = <&gpio5 5 0>;
		initial-mode = <1>;

		clocks = <&clks 201>;
		clock-names = "cko";

		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_usb3503 >;
		status = "ok";
	};
};

&weim {	
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_weim_nor_1 &pinctrl_weim_cs0_1>;
	#address-cells = <2>;
	#size-cells = <1>;
	ranges = <0 0 0x08000000 0x08000000>;

	/*status = "disabled"; */

	sram: sram@0,0 {
		  compatible = "mtd-ram";
		  reg = <0 0 0x80000>;
		  /*	reg = <0x08000000 0x80000>; */
		  bank-width = <1>;
		  linux,mtd-name = "SRAM";

		  fsl,weim-cs-timing = <
			  /*
				 CSEN = 1 (CS Enable)
				 SWR = SRD = 0 (Write/Read Access asynchronous
				 MUM = 0 (Multiplexed Mode disable)
				 WFL = RFL = 1 (Write/Read Fix Latency Mode, No WAIT signal monitoring
				 CRE = 0 (CRE signal use is disabled)
				 CREP = 1 (For Non-PSRAM memory CREP value should be 1)
				 BL = 100b (Continuous burst length)
				 WC = 0 (Write access according to BL)
				 BCD = 00b (Devide EIM clock by 1)
				 BCS = 00b (0 EIM clock cycle additional delay)
				 DZS = 010b (16 bit port resides on DATA[31:16])
				 SP = 0 (User mode access allowed in the memory range of this CS area)
				 CSREC = 011b (3 EIM clock cycles min. width of CS, OE, WE)
				 AUS = 0 (Address shifted according to port size (DSZ config.))
				 GBC = 000b (min. of 0 EIM clock cycles before next access from different CS)
				 WP = 0 (Writes are allowed in memory range of this CS)
				 PSZ = 0000b (ignored when sync. Mode is disabled)
			   */
			  0x003204B1  /* EIM_CSnGCR1 */
			  0x00000001  /* EIM_CSnGCR2 */
			  /*
				 RWSC = 7 (7 clock cycles = 52 ns > 45 ns)
				 OEA = 3 (t_DOE, Clock cycles =  22,5 ns > 22 ns)
				 OEN = 0 (0 EIM clock cycles between end of access and OE negation)
				 RCSA = 0 (0 EIM clock cycles between beginning of read access and CS assertion)
				 RCSN = 0 (0 EIM clock cycles between end of read access and CS negation)
			   */
			  0x07023000  /* EIM_CS0RCR1 */

			  /*
				 RBEN = 0 (0 EIM clock cycles between end of read access an BE negation)
				 RBE = 1 (BE enabled during read access)
				 RBEA = 0 (0 EIM clock cayles between beginning of read access and BE assertion)
				 RL = 0 (Feedback clock loop delay is up to 2 cycles for BCD == 0)
				 PAT = 000b (Ignored, no page access (APR==0))
				 APR = 0 (single word async read access, word size defined by DZS == 16 bit)
			   */
			  0x00000008 /* EIM_CS0RCR2 */

			  /*
				 WAL = 0 (negation of ADV according to WADVN)
				 WBED = 0
				 WWSC = 7 (7 clock cycles = 52 ns > 45 ns)
				 WADVA = 0 (0 EIM clock cycles between beginning of access and ADV assertion)
				 WADVN = 1 (calculated as WADVN + WADVA + 1 = 2 EIM clock cycle in async. mode)
				 WBEA = 0 (0 EIM clock cycles between beginning of access and BE assertion)
				 WBEN = 0 (0 EIM clock cycles between end of access and WE negation)
				 WEA = 0 (0 EIM clock cycles between beginning of access an WE assertion)
				 WEN = 0 (0 EIM clock cycles between end of access and WE negation)
				 WCSA = 0 (0 EIM clock cycles between beginning of read access and CS assertion)
				 WCSN = 0 (0 EIM clock cycles between end of read access and CS negation)
			   */
			  0x07040000 /* EIM_CS0WCR1 */

			  0x00000000 /* EIM_CS0WCR2 */
			  >;
	  };
};

&iomuxc {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_hog_1 &pinctrl_pfid_0_2 &pinctrl_pfid_5_7>;
	

	wdog1{
		pinctrl_wdog1_1: wdoggrp-1 {
			fsl,pins = <
				MX6QDL_PAD_GPIO_9__WDOG1_B 0x80000000
				>;
			};
	};

	5P0_can{
		pinctrl_5P0_can_1: supply_5P0_cangrp-1 {
			fsl,pins = <
				MX6QDL_PAD_DISP0_DAT15__GPIO5_IO09  0x40000008 /* SION + DSE=120 Ohm, 120 from 3.0.35 kernel, default (NO_PAD_CTL) wasn't working*/
			>;
			};
	};
	pfid{
		pinctrl_pfid_3_4: pfid_3_4_grp{
			fsl,pins = <
				MX6QDL_PAD_NANDF_D3__GPIO2_IO03  0x80000000
				MX6QDL_PAD_NANDF_D4__GPIO2_IO04  0x80000000
			>;
			};
		pinctrl_pfid_0_2: pfid_0_2_grp{
			fsl,pins = <
				MX6QDL_PAD_NANDF_D0__GPIO2_IO00  0x80000000
				MX6QDL_PAD_NANDF_D1__GPIO2_IO01  0x80000000
				MX6QDL_PAD_NANDF_D2__GPIO2_IO02  0x80000000
			>;
			};
		pinctrl_pfid_5_7: pfid_5_7_grp{
			fsl,pins = <
				MX6QDL_PAD_NANDF_D5__GPIO2_IO05  0x80000000
				MX6QDL_PAD_NANDF_D6__GPIO2_IO06  0x80000000
				MX6QDL_PAD_NANDF_D7__GPIO2_IO07  0x80000000
			>;
			};
	};

	ecspi1{
		pinctrl_ecspi1_chipselect: pinctrl_ecspi1_gpio_csgrp-1 {
			fsl,pins = <
				MX6QDL_PAD_KEY_ROW2__ECSPI1_SS2		0x80000000			/*  KP_PIN_3 */
				MX6QDL_PAD_KEY_COL2__ECSPI1_SS1		0x80000000			/*  KP_PIN_14 */
				MX6QDL_PAD_KEY_ROW1__ECSPI1_SS0		0x80000000			/*  KP_PIN_18 */
			>;
			};
	};

	gpio_export{
		pinctrl_gpio_export_keypad_spi_gpio: pinctrl_gpio_kpgrp-1 {
			fsl,pins = <
				MX6QDL_PAD_KEY_ROW2__GPIO4_IO11		0x80000000			/*  KP_PIN_3 */
				MX6QDL_PAD_GPIO_19__GPIO4_IO05		0x80000000			/*  KP_PIN_13 */
				MX6QDL_PAD_KEY_COL2__GPIO4_IO10		0x80000000			/*  KP_PIN_14 */
				MX6QDL_PAD_KEY_COL1__GPIO4_IO08		0x80000000			/*  KP_PIN_15 */
				MX6QDL_PAD_KEY_ROW0__GPIO4_IO07		0x80000000			/*  KP_PIN_16 */
				MX6QDL_PAD_KEY_COL0__GPIO4_IO06		0x80000000			/*  KP_PIN_17 */
				MX6QDL_PAD_KEY_ROW1__GPIO4_IO09		0x80000000			/*  KP_PIN_18 */
			>;
			};
		pinctrl_gpio_export_keypad_gpio_changeable: pinctrl_gpio_kpgrp-2 {
			fsl,pins = <
				MX6QDL_PAD_DI0_PIN4__GPIO4_IO20		0x80000000			/*  KP_PIN_4 */
				MX6QDL_PAD_DI0_PIN15__GPIO4_IO17	0x80000000			/*  KP_PIN_5 */
				MX6QDL_PAD_DI0_PIN2__GPIO4_IO18		0x80000000			/*  KP_PIN_6 */
				MX6QDL_PAD_DI0_PIN3__GPIO4_IO19		0x80000000			/*  KP_PIN_7 */
				MX6QDL_PAD_DI0_DISP_CLK__GPIO4_IO16	0x80000000			/*  KP_PIN_8 */
				MX6QDL_PAD_DISP0_DAT0__GPIO4_IO21	0x80000000			/*  KP_PIN_9 */
				MX6QDL_PAD_SD1_DAT2__GPIO1_IO19		0x80000000			/*  KP_PIN_10 */
			>;
			};

		pinctrl_gpio_export_keypad_gpio_i2c: pinctrl_gpio_kpgrp-3 {
			fsl,pins = <
				MX6QDL_PAD_KEY_ROW3__GPIO4_IO13		0x80000000			/*  KP_PIN_11 */
				MX6QDL_PAD_KEY_COL3__GPIO4_IO12		0x80000000			/*  KP_PIN_12 */
			>;
			};
		pinctrl_gpio_export_gpio_fixed_in_santoka: pinctrl_gpio_kpgrp-4b {
			fsl,pins = <
				MX6QDL_PAD_DISP0_DAT10__GPIO4_IO31		0x80000000		/*  CLEAR ALL */
			>;
			};
		pinctrl_gpio_export_gpio_fixed_in_santaro: pinctrl_gpio_kpgrp-4 {
			fsl,pins = <
				MX6QDL_PAD_CSI0_DAT6__GPIO5_IO24		0x80000000		/*  DIG_IN_1 */
				MX6QDL_PAD_CSI0_DAT5__GPIO5_IO23		0x80000000		/*  DIG_IN_2 */
				MX6QDL_PAD_DISP0_DAT10__GPIO4_IO31		0x80000000		/*  CLEAR ALL */
			>;
			};
		pinctrl_gpio_export_gpio_fixed_out_santaro: pinctrl_gpio_kpgrp-5 {
			fsl,pins = <
				MX6QDL_PAD_SD1_DAT1__GPIO1_IO17			0x80000000		/*  DIG_OUT_1 */
				MX6QDL_PAD_CSI0_DAT7__GPIO5_IO25		0x80000000		/*  DIG_OUT_2 */
				MX6QDL_PAD_SD3_DAT3__GPIO7_IO07			0x80000000		/*  KP5V */
				/* OC not configured yet */
				MX6QDL_PAD_CSI0_PIXCLK__GPIO5_IO18		0x80000000		/*  LED1 */
			>;
			};
		pinctrl_gpio_export_gpio_fixed_out_santoka: pinctrl_gpio_kpgrp-6 {
			fsl,pins = <
				MX6QDL_PAD_DISP0_DAT3__GPIO4_IO24		0x80000000		/*  KP5V */
				/* OC not configured yet */
				MX6QDL_PAD_CSI0_PIXCLK__GPIO5_IO18		0x80000000		/*  LED1 */
			>;
			};

		pinctrl_gpio_export_wlan_ctrl: pinctrl_gpio_wlan-1 {
			fsl,pins = <
				MX6QDL_PAD_EIM_D26__GPIO3_IO26			0x80000000		/*  WLAN RESET */
				MX6QDL_PAD_EIM_D27__GPIO3_IO27			0x80000000		/*  WLAN_PD */
			>;
			};
		pinctrl_gpio_export_usb_ctrl: pinctrl_gpio_usb-1 {
			fsl,pins = <
				MX6QDL_PAD_DISP0_DAT4__GPIO4_IO25		0x80000000		/*  USB PCT EN */
			>;
			};
	};


	ldb{
		pinctrl_ldb_1: ldbgrp-1{
			fsl,pins = <
				MX6QDL_PAD_CSI0_DATA_EN__GPIO5_IO20 0x80000000 /* Sel 6/8*/
				>;
			};
	};

	ctouch{
		pinctrl_ctouch: ctouch-grp-1{
			fsl,pins = <
				MX6QDL_PAD_DISP0_DAT5__GPIO4_IO26    0x80000000			/*CTOUCH_INT2*/
				MX6QDL_PAD_DISP0_DAT6__GPIO4_IO27    0x80000000         /*CTOUCH_INT*/
				MX6QDL_PAD_SD1_CMD__GPIO1_IO18       0x80000000         /*CTOUCH_RESET2*/
				MX6QDL_PAD_SD1_CLK__GPIO1_IO20       0x80000000         /*CTOUCH_RESET*/
				>;
			};
	};
	rtouch{
		pinctrl_rtouch: rtouch-grp-1{
			fsl,pins = <
				MX6QDL_PAD_DISP0_DAT12__GPIO5_IO06   0x80000000         /*ResTOUCH_INT*/
				>;
			};
	};
	rtc{
		pinctrl_rtc: rtc-grp-1{
			fsl,pins = <
				MX6QDL_PAD_DISP0_DAT8__GPIO4_IO29   0x80000000         /*RTC INT*/
				>;
			};
	};
	usb3503{
		pinctrl_usb3503: pinctrl_usb3503-grp-1{
			fsl,pins = <
				MX6QDL_PAD_GPIO_17__GPIO7_IO12    0x80000000		/* USB INT */
				MX6QDL_PAD_DISP0_DAT11__GPIO5_IO05 0x80000000		/* USB Reset */
				MX6QDL_PAD_SD1_DAT0__GPIO1_IO16   0x00000038        /* USB Connect */ /* Has DSE_120Ohm in Q and no_pad_ctrl in dl on 3.0.35*/
				>;
			};
	};

	sound {
		pinctrl_sound_1: sound_grp-1 {
			fsl,pins = <
				MX6QDL_PAD_CSI0_DAT11__GPIO5_IO29   0x80000000  /* Speaker ON */
			>;
		};
	};

	/* System wide pin configs */
	hog {
		pinctrl_hog_1: hoggrp-1 {
			fsl,pins = <
				/* Clock out 12Mhz Ref */
				MX6QDL_PAD_CSI0_MCLK__CCM_CLKO1		0x17059  /* PAD_CTL_PKE | PAD_CTL_PUE | PAD_CTL_PUS_47K_UP | PAD_CTL_SPEED_LOW | PAD_CTL_DSE_80ohm | PAD_CTL_SRE_FAST | PAD_CTL_HYS */
															 /* (1 << 12)   | (1 << 13)   |(1 << 14)           | (1 << 6)          | (3 << 3)          |(1 << 0)          | (1 << 16)   */
			>;
		};
	};


};

&wdog1 {
	fsl,default-timeout = <60>;	/* Default timeout on seconds */
	fsl,reset-wdog-b = <1>;		/* watchdog triggers the external wdog reset */

	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_wdog1_1>;
};


&pwm1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_pwm1_1>;
	status = "okay";
};

&ssi2 {
	fsl,mode = "i2s-master";
	status = "okay";
};

&uart1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart1_2>;
	status = "okay";

	rs485-mode;
	/* rs485-mode-half-duplex; */
	rs485-tx-enable-gpio = <&gpio7 8 0>;
	
	rs485-supply = <&supply_5P0_can_rs485>;
};

&uart2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart2_3>;
	status = "okay";
};
&uart4 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart4_2>;
	status = "okay";
};
&uart5 {
	compatible = "fsl,imx-mdb-guf";
	/*,"fsl,imx6q-uart", "fsl,imx21-uart";*/

	mdb-wakeup-gpio = <&gpio5 28 0>;

	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart5_rts_cts_hw1_1>;
	status = "okay";
};
&hw_revision_fixup {
	uart5_hw1_2 {
		overwrite = < 1 2 &uart5>;  /* <   major minor node */
		pinctrl-0 = <&pinctrl_uart5_rts_cts_hw1_2>;
	};
};

&usbh1 {
	vbus-supply = <&reg_usb_h1_vbus>;

	gpio-vbus = <&gpio1 0 0>;

	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usb_h1_vbus_1>;

	status = "okay";
};
&usbh2 {
	vbus-supply = <&reg_usb_h2_vbus>;
	osc-clkgate-delay = <0x3>;

	pinctrl-names = "idle", "active";
	pinctrl-0 = <&pinctrl_usbh2_1>;
	pinctrl-1 = <&pinctrl_usbh2_active_1>;

	status = "okay";
};

&usbotg {
	vbus-supply = <&reg_usb_otg_vbus>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usbotg_1>;
	disable-over-current;
	status = "okay";
};

/* sdcard */
&usdhc2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usdhc2_2>;
	cd-gpios = <&gpio1 4 0>;
	wp-gpios = <&gpio1 2 0>;
	no-1-8-v;
	keep-power-in-suspend;
	enable-sdio-wakeup;

	vmmc-supply = <&supply_sw4_3V3>;
	status = "okay";
};

/* emmc */
&usdhc4 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usdhc4_1>;
	bus-width = <8>;
	non-removable;
	no-1-8-v;
	keep-power-in-suspend;

	vmmc-supply = <&supply_sw4_3V3>;

	status = "okay";
};

&vpu {
	pu-supply = <&pu_dummy>; /* ldo-bypass:use pu_dummy if VDDSOC share with VDDPU */
};


&flexcan1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_flexcan1_3>;
	status = "okay";
	
	xceiver-supply = <&supply_5P0_can_rs485>;
};

&flexcan2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_flexcan2_2>;
	status = "okay";
 	
	xceiver-supply = <&supply_5P0_can_rs485>;
};

&ldb {
	ipu_id = <0>;
	disp_id = <0>;
	sec_ipu_id = <0>;
	ext_ref = <1>;
	mode = "sin0"; 
	sec_ipu_id = <0>;
	sec_disp_id = <1>;
	display = <&display1>;

	mapping = "SPWG";

	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ldb_1>;

	sel6_8-gpio = <&gpio5 20 0>;
	sel6_8-polarity = <0>;
	lvds-channels = <3>;

	status = "disabled";


	display1: display1 {
		bits-per-pixel = <16>;
		bus-width = <24>;

		power-on-off-timings = <5 210 210  10 1000>;
		backlight = <&backlight>;
		lcd-enable-gpio = <&gpio5 21 0>;
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_lcd_enable>;

		display-timings {
			native-mode = <&timing0>;
			timing0: timing0 {
				clock-frequency = <35339000>;
				hactive = <800>;
				vactive = <480>;
				hfront-porch = <100>;
				hback-porch = <100>;
				hsync-len = <24>;
				vback-porch = <5>;
				vfront-porch = <5>;
				vsync-len = <3>;

				fb-sync-flags = <0>;

			};
		};
	};
};

/* LDO mode section */
/*#include "imx6_guf_ldo_mode.dtsi" */
